// ==============================
// Translations
// ==============================

const translations = {
  en: {
    navProjects: "Projects",
    navResources: "Resources",
    navAbout: "About",
    navContact: "Contact",

    heroKicker: "PORTFOLIO Â· DATA, OPERATIONS & DIGITAL PROJECTS",
    heroSubtitle:
      "Data & Operations Analyst with experience in fintech, executive reporting and lightweight web/digital projects.",
    heroCtaProjects: "View projects",
    heroCtaContact: "Get in touch",
    heroFocus:
      "Focus: remote work, practical solutions and reusable digital assets.",

    projectsTitle: "Selected projects",
    projectsIntro:
      "A mix of real client work, fintech experience and academic projects focused on data, operations and web delivery.",

    filterAll: "All",
    filterWeb: "Web",
    filterDev: "Dev",
    filterData: "Data / BI",
    filterTemplates: "Templates",

    proj1Title: "Inventory Management System",
    proj1Tag: "PYTHON Â· SQLITE Â· CLI",
    proj1Desc:
      "Academic project: a console-based inventory management tool with CRUD operations and low-stock alerts.",
    proj1RepoLabel: "View repository",

    proj2Title: "MedComp Corporate Website",
    proj2Tag: "HTML Â· CSS Â· JS Â· PHP",
    proj2Desc:
      "Real client project (2019): multipage corporate website for a medical consulting company.",
    proj2DemoLabel: "View live demo",
    proj2RepoLabel: "View repository",

    proj3Title: "Northbridge â€“ Executive Coaching Landing",
    proj3Tag: "LANDING PAGE Â· HTML Â· CSS Â· JS",
    proj3Desc:
      "Landing page template for senior coaches and consultants, focused on clarity and strong calls to action.",
    proj3DemoLabel: "View live demo",
    proj3RepoLabel: "View repository",

    productsTitle: "Digital resources (coming soon)",
    productsIntro:
      "Ebooks, dashboards and templates focused on operations, data and simple digital products.",
    ebook1Title: "Kindle/ebook layout guide",
    ebook1Tag: "KINDLE Â· LAYOUT Â· CHECKLIST",
    ebook1Desc:
      "A practical guide for turning PDFs or manuscripts into clean Kindle-ready ebooks.",
    ebook1LinkText: "Get notified",

    resourcesTitle: "Resources",
    resourcesIntro:
      "A small collection of references and tools I often use when working on data, operations and web projects.",
    resource1Title: "Data & Operations toolkit",
    resource1Tag: "DATA Â· OPERATIONS",
    resource1Desc:
      "Curated list of functions, checks and dashboards patterns I use for reporting and monitoring.",
    resource1LinkText: "View collection",
    resource2Title: "Web & digital checklist",
    resource2Tag: "WEB Â· TEMPLATES",
    resource2Desc:
      "Personal checklist for small websites and digital products: content, UX and basic analytics.",
    resource2LinkText: "View checklist",

    aboutTitle: "About",
    aboutIntro:
      "I work at the intersection of data, operations and digital projects. I moved from support and operations roles into analysis, reporting and lightweight web development.",
    aboutHighlight:
      "Based in Argentina Â· Open to fully remote work. Looking for data/operations roles and freelance web/digital projects.",

    aboutCol1Title: "Data & operations",
    aboutCol1Text:
      "Experience with dashboards, KPI monitoring, customer metrics and executive reporting for decision-making.",
    aboutCol2Title: "Web & digital products",
    aboutCol2Text:
      "Development of small websites, WordPress layouts and Kindle/ebook formatting, plus reusable templates.",
    aboutCol3Title: "Learning & experimentation",
    aboutCol3Text:
      "Always studying game design, data analysis and generative AI to connect ideas across disciplines.",

    contactTitle: "Contact",
    contactIntro:
      "If you need someone who can connect data, operations and digital product with a practical, honest approach, let's talk.",
    contactWorkTitle: "Work & collaborations",
    contactWorkText:
      "Available for remote data/operations roles and freelance projects involving websites, dashboards or digital products.",
    contactWorkEmail: "Email me",
    contactWorkLinkedIn: "View LinkedIn profile",
    contactExploreTitle: "Explore first",
    contactExploreText:
      "If you prefer to explore first, you can browse the projects and resources in this portfolio.",
    contactExploreProjects: "View portfolio projects",

    footerText:
      "Portfolio built by Alejandro Matesa. Data & Operations Â· Web & Digital Projects.",
  },

  es: {
    navProjects: "Proyectos",
    navResources: "Recursos",
    navAbout: "Sobre mÃ­",
    navContact: "Contacto",

    heroKicker: "PORTFOLIO Â· DATA, OPERATIONS & DIGITAL PROJECTS",
    heroSubtitle:
      "Data & Operations Analyst con experiencia en fintech, reportes ejecutivos y proyectos web/digitales livianos.",
    heroCtaProjects: "Ver proyectos",
    heroCtaContact: "Contactarme",
    heroFocus:
      "Enfoque: trabajo remoto, soluciones prÃ¡cticas y activos digitales reutilizables.",

    projectsTitle: "Proyectos seleccionados",
    projectsIntro:
      "CombinaciÃ³n de proyectos reales con clientes, experiencia en fintech y trabajos acadÃ©micos enfocados en datos, operaciones y entrega web.",

    filterAll: "Todos",
    filterWeb: "Web",
    filterDev: "Dev",
    filterData: "Data / BI",
    filterTemplates: "Plantillas",

    proj1Title: "Inventory Management System",
    proj1Tag: "PYTHON Â· SQLITE Â· CLI",
    proj1Desc:
      "Proyecto acadÃ©mico: herramienta de inventario en consola con operaciones CRUD y alertas de bajo stock.",
    proj1RepoLabel: "Ver repositorio",

    proj2Title: "MedComp Corporate Website",
    proj2Tag: "HTML Â· CSS Â· JS Â· PHP",
    proj2Desc:
      "Proyecto real (2019): sitio corporativo multipÃ¡gina para una consultora mÃ©dica.",
    proj2DemoLabel: "Ver demo online",
    proj2RepoLabel: "Ver repositorio",

    proj3Title: "Northbridge â€“ Executive Coaching Landing",
    proj3Tag: "LANDING PAGE Â· HTML Â· CSS Â· JS",
    proj3Desc:
      "Landing page para coaches y consultores senior, enfocada en claridad y llamados a la acciÃ³n fuertes.",
    proj3DemoLabel: "Ver demo online",
    proj3RepoLabel: "Ver repositorio",

    productsTitle: "Recursos digitales (prÃ³ximamente)",
    productsIntro:
      "Ebooks, dashboards y plantillas centradas en operaciones, datos y productos digitales simples.",
    ebook1Title: "GuÃ­a de maquetaciÃ³n Kindle/ebook",
    ebook1Tag: "KINDLE Â· MAQUETACIÃ“N Â· CHECKLIST",
    ebook1Desc:
      "GuÃ­a prÃ¡ctica para transformar PDFs o manuscritos en ebooks limpios listos para Kindle.",
    ebook1LinkText: "Quiero saber cuando estÃ©",

    resourcesTitle: "Recursos",
    resourcesIntro:
      "PequeÃ±a colecciÃ³n de referencias y herramientas que suelo usar para proyectos de datos, operaciones y web.",
    resource1Title: "Toolkit de Data & Operations",
    resource1Tag: "DATA Â· OPERATIONS",
    resource1Desc:
      "Lista curada de funciones, controles y patrones de dashboards que uso para reportes y monitoreo.",
    resource1LinkText: "Ver colecciÃ³n",
    resource2Title: "Checklist web & digital",
    resource2Tag: "WEB Â· PLANTILLAS",
    resource2Desc:
      "Checklist personal para sitios pequeÃ±os y productos digitales: contenido, UX y analÃ­tica bÃ¡sica.",
    resource2LinkText: "Ver checklist",

    aboutTitle: "Sobre mÃ­",
    aboutIntro:
      "Trabajo en la intersecciÃ³n de datos, operaciones y proyectos digitales. PasÃ© de roles de soporte y operaciones a anÃ¡lisis, reporting y desarrollo web liviano.",
    aboutHighlight:
      "Basado en Argentina Â· Abierto a trabajo 100% remoto. Busco roles de data/operations y proyectos freelance web/digitales.",

    aboutCol1Title: "Data & operations",
    aboutCol1Text:
      "Experiencia con dashboards, monitoreo de KPIs, mÃ©tricas de clientes y reportes ejecutivos para la toma de decisiones.",
    aboutCol2Title: "Web & digital products",
    aboutCol2Text:
      "Desarrollo de sitios pequeÃ±os, maquetaciÃ³n en WordPress y formateo Kindle/ebook, mÃ¡s plantillas reutilizables.",
    aboutCol3Title: "Aprendizaje continuo",
    aboutCol3Text:
      "Estudio diseÃ±o de juegos, anÃ¡lisis de datos y IA generativa para conectar ideas entre disciplinas.",

    contactTitle: "Contacto",
    contactIntro:
      "Si necesitÃ¡s alguien que conecte datos, operaciones y producto digital con un enfoque prÃ¡ctico y honesto, hablemos.",
    contactWorkTitle: "Trabajo & colaboraciones",
    contactWorkText:
      "Disponible para roles remotos de data/operations y proyectos freelance con dashboards, sitios web o productos digitales.",
    contactWorkEmail: "Escribirme",
    contactWorkLinkedIn: "Ver perfil de LinkedIn",
    contactExploreTitle: "Explorar primero",
    contactExploreText:
      "Si preferÃ­s explorar antes de hablar, podÃ©s recorrer los proyectos y recursos de este portfolio.",
    contactExploreProjects: "Ver proyectos del portfolio",

    footerText:
      "Portfolio creado por Alejandro Matesa. Data & Operations Â· Web & Digital Projects.",
  },
};

// ==============================
// Language handling
// ==============================

let currentLang = localStorage.getItem("portfolio-lang") || "en";

function applyLanguage(lang) {
  const dict = translations[lang];
  if (!dict) return;

  currentLang = lang;
  localStorage.setItem("portfolio-lang", lang);
  document.documentElement.setAttribute("lang", lang);

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.dataset.i18n;
    if (dict[key]) {
      el.textContent = dict[key];
    }
  });

  // Update language buttons state
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.classList.toggle("is-active", btn.dataset.lang === lang);
  });
}

// ==============================
// Theme handling
// ==============================

function getPreferredTheme() {
  const stored = localStorage.getItem("portfolio-theme");
  if (stored === "light" || stored === "dark") return stored;
  const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  return prefersDark ? "dark" : "light";
}

function applyTheme(theme) {
  document.documentElement.dataset.theme = theme;
  localStorage.setItem("portfolio-theme", theme);

  const toggle = document.getElementById("themeToggle");
  if (!toggle) return;

  const icon = toggle.querySelector(".theme-toggle-icon");
  const label = toggle.querySelector(".theme-toggle-label");

  if (theme === "dark") {
    icon.textContent = "â˜€ï¸";
    label.textContent = "Light";
  } else {
    icon.textContent = "ðŸŒ™";
    label.textContent = "Dark";
  }
}

// ==============================
// Projects filter
// ==============================

function setupProjectFilter() {
  const filterButtons = document.querySelectorAll(
    ".projects-filter [data-filter]"
  );
  const cards = document.querySelectorAll(".project-card");

  if (!filterButtons.length || !cards.length) return;

  filterButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const value = btn.dataset.filter;

      filterButtons.forEach((b) => b.classList.remove("is-active"));
      btn.classList.add("is-active");

      cards.forEach((card) => {
        if (value === "all") {
          card.classList.remove("is-hidden");
          return;
        }
        const cats = (card.dataset.category || "").split(/\s+/);
        const shouldShow = cats.includes(value);
        card.classList.toggle("is-hidden", !shouldShow);
      });
    });
  });
}

// ==============================
// Nav: mobile toggle & scroll hide/show
// ==============================

function setupNavigation() {
  const header = document.querySelector(".site-header");
  const toggle = document.querySelector(".nav-toggle");
  const mobilePanel = document.querySelector(".nav-mobile-panel");
  const navLinks = document.querySelectorAll(
    ".nav-links a, .nav-mobile-panel a"
  );

  if (!header || !toggle) return;

  // Mobile toggle
  toggle.addEventListener("click", () => {
    const isOpen = header.classList.toggle("mobile-open");
    toggle.classList.toggle("is-open", isOpen);
    toggle.setAttribute("aria-expanded", String(isOpen));
  });

  // Close mobile menu when a link is clicked
  navLinks.forEach((link) => {
    link.addEventListener("click", () => {
      if (header.classList.contains("mobile-open")) {
        header.classList.remove("mobile-open");
        toggle.classList.remove("is-open");
        toggle.setAttribute("aria-expanded", "false");
      }
    });
  });

  // Hide nav on scroll down, show on scroll up
  let lastY = window.scrollY;

  window.addEventListener("scroll", () => {
    const currentY = window.scrollY;

    if (currentY > lastY && currentY > 100) {
      header.classList.add("site-header--hidden");
    } else {
      header.classList.remove("site-header--hidden");
    }

    header.classList.toggle("elevated", currentY > 10);
    lastY = currentY;
  });
}

// ==============================
// Smooth internal scroll
// ==============================

function setupSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach((link) => {
    const targetId = link.getAttribute("href").slice(1);
    if (!targetId) return;

    const target = document.getElementById(targetId);
    if (!target) return;

    link.addEventListener("click", (event) => {
      event.preventDefault();
      const rect = target.getBoundingClientRect();
      const offset = rect.top + window.scrollY - 90;

      window.scrollTo({
        top: offset,
        behavior: "smooth",
      });
    });
  });
}

// ==============================
// Init
// ==============================

document.addEventListener("DOMContentLoaded", () => {
  // Language
  applyLanguage(currentLang);

  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.dataset.lang;
      if (lang && lang !== currentLang) {
        applyLanguage(lang);
      }
    });
  });

  // Theme
  applyTheme(getPreferredTheme());

  const themeToggle = document.getElementById("themeToggle");
  if (themeToggle) {
    themeToggle.addEventListener("click", () => {
      const current = document.documentElement.dataset.theme || "light";
      applyTheme(current === "light" ? "dark" : "light");
    });
  }
const navToggle = document.querySelector(".nav-toggle");
const siteHeader = document.querySelector(".site-header");

if (navToggle && siteHeader) {
  navToggle.addEventListener("click", () => {
    const isOpen = navToggle.classList.toggle("is-open");
    siteHeader.classList.toggle("mobile-open", isOpen);
    navToggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
  });
}
  // Features
  setupProjectFilter();
  setupNavigation();
  setupSmoothScroll();
});
